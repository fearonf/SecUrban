<h1>Information on : {{vm.hotel.name}} - <hotel-rating stars="vm.stars"></hotel-rating></h1>

<p><small>{{vm.hotel.location.address}}</small></p>

<p>{{vm.hotel.description}}</p>

<p>This hotel offers the following services:</p>

<ul>
    <li ng-repeat="service in vm.hotel.services">{{service}}</li>
</ul>

<h3>Reviews</h3>
<ul>
    <li ng-repeat="review in vm.hotel.reviews"><strong>{{review.name}} says: &nbsp&nbsp</strong>  {{review.review}} </li>
</ul>

<!-- form is only visible if the return from vm.isLoggedIn() is true -->
<div ng-if="vm.isLoggedIn()">
   <form name="vm.reviewForm" ng-submit="vm.addReview()">
   <!-- remove name input as using name from token instead
    Your name: <input type = "text" name="name" required ng-minlength="2" ng-model="vm.name">

    <div ng-show="vm.reviewForm.name.$dirty && vm.reviewForm.name.$invalid && vm.isSubmitted">
        <p>Name should be more than 2 characters long</p>
    </div> -->

    Your rating: <input type="number" name="rating" required ng-pattern="/^[1-5]$/" ng-model="vm.rating">
    <div ng-show="vm.reviewForm.rating.$dirty && vm.reviewForm.rating.$invalid && vm.isSubmitted">
        <p>Rting must be between 1-5.</p>
    </div>

    Your review: <textarea name="review" required ng-model="vm.review"></textarea>
    <div ng-show="vm.reviewForm.review.$dirty && vm.isSubmitted">
        <p>Please add a review</p>
    </div>
    <button type="submit"class="btn">Add review</button>
   </form>
</div>


<!-- following div  is only visible if the return from vm.isLoggedIn() is true -->
<div ng-if="vm.isLoggedIn()">
<h3> This is the start of the hotel Update form should pre-populate with the existing data taken from database</h3>


<form name="vm.addForm" ng-submit="vm.updateHotel()">
    Hotel name: <input type = "text" name="name" required ng-minlength="2" ng-model="vm.hotel.name">
    Star Rating: <input type="number" name="stars" required ng-pattern="/^[1-5]$/" ng-model="vm.hotel.stars">

    Services: <textarea name="services"  ng-model="vm.hotel.services"></textarea>
    <div ng-show="vm.addForm.services.$dirty && vm.addForm.services.$invalid && vm.isSubmitted">
        <p>Please add services</p>
    </div>

    Description: <textarea name="description" required ng-model="vm.hotel.description"></textarea>
    <div ng-show="vm.addForm.desciption.$dirty && vm.addForm.description.$invalid && vm.isSubmitted">
        <p>Please add a description</p>
    </div>

    Currency: <input type="text" name="currency" required ng-model="vm.hotel.currency">
    <div ng-show="vm.addForm.currency.$dirty && vm.addForm.currency.$invalid && vm.isSubmitted">
        <p>Please add currency</p>
    </div>

    Coordinates:
    longitude: <input type="number" name="longitude" required ng-model="vm.hotel.location.coordinates[0]" >
    <div ng-show="vm.addForm.longitude.$dirty && vm.addForm.longitude.$invalid && vm.isSubmitted">
        <p>Please add longitude</p>
    </div>
    latitude:  <input type="number" name="latitude" required ng-model="vm.hotel.location.coordinates[1]" >
    <div ng-show="vm.addForm.latitude.$dirty && vm.addForm.latitude.$invalid && vm.isSubmitted">
        <p>Please add latitude</p>
    </div>


    <button type="submit"class="btn">Update hotel</button>


</form>

<form name="vm.delForm" ng-submit="vm.deleteHotel()">
    <button type="submit"class="btn">Delete hotel</button>
</form>

</div>
